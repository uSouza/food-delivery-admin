<div [@routerTransition]>
    <div class="row">
        <div class="col-lg-12">
            <ngb-alert [type]="alert.type" (close)="closeAlert(alert)" *ngFor="let alert of alerts">{{ alert.message }}</ngb-alert>
            <div class="card mb-3">
                <div class="card-header">
                    <i class="fa fa-clock-o fa-fw"></i> Pedidos pendentes</div>
                <h5 *ngIf="orders.length == 0">Não há pedidos para exibir</h5>
                <table *ngIf="orders.length > 0" class="card-body table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Cliente</th>
                            <th>Endereço</th>
                            <th>Bairro</th>
                            <th>Preço</th>
                            <th>Aberto às</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let order of orders | paginate: { itemsPerPage: 7, currentPage: page }">
                        <tr *ngIf="order.deliver && order.status_id==1" class="table-warning">
                            <th>{{order.id}}</th>
                            <td>{{order.client.name}}</td>
                            <td>{{order.location.address}} - {{order.location.number}}</td>
                            <td>{{order.location.district}}</td>
                            <td>{{order.price | currency: 'BRL': true}}</td>
                            <td>{{order.created_at | date: 'H:mm'}}</td>
                            <td>
                                <button (click)="showOrder(order)" type="button" class="btn btn-sm btn-success">Visualizar</button>
                            </td>
                        </tr>
                        <tr *ngIf="!order.deliver && order.status_id==1" class="table-default">
                            <th>{{order.id}}</th>
                            <td>{{order.client.name}}</td>
                            <td>Retirar no balcão</td>
                            <td>Retirar no balcão</td>
                            <td>{{order.price | currency: 'BRL': true}}</td>
                            <td>{{order.created_at | date: 'H:mm'}}</td>
                            <td>
                                <button (click)="showOrder(order)" type="button" class="btn btn-sm btn-success">Visualizar</button>
                            </td>
                        </tr>
                        <tr *ngIf="order.deliver && order.status_id==5" class="table-danger">
                            <th>{{order.id}}</th>
                            <td>{{order.client.name}}</td>
                            <td>{{order.location.address}} - {{order.location.number}}</td>
                            <td>{{order.location.district}}</td>
                            <td>{{order.price | currency: 'BRL': true}}</td>
                            <td>{{order.created_at | date: 'H:mm'}}</td>
                            <td>
                                <button (click)="cancelOrder(order)" type="button" class="btn btn-sm btn-danger">Cancelar</button>
                            </td>
                        </tr>
                        <tr *ngIf="!order.deliver && order.status_id==5" class="table-danger">
                            <th>{{order.id}}</th>
                            <td>{{order.client.name}}</td>
                            <td>Retirar no balcão</td>
                            <td>Retirar no balcão</td>
                            <td>{{order.price | currency: 'BRL': true}}</td>
                            <td>{{order.created_at | date: 'H:mm'}}</td>
                            <td>
                                <button (click)="cancelOrder(order)" type="button" class="btn btn-sm btn-danger">Cancelar</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="has-text-centered">
                    <pagination-controls (pageChange)="page = $event" previousLabel="Anterior" nextLabel="Próximo">
                    </pagination-controls>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-xl-12 text-right">
                        <a class="btn btn-lg btn-success" href="#">Atualizar</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
